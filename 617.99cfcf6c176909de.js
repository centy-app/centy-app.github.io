"use strict";(self.webpackChunkcenty=self.webpackChunkcenty||[]).push([[617],{7617:(Y,p,n)=>{n.r(p),n.d(p,{RegisterComponent:()=>N});var s=n(6223),c=n(6814),f=n(8702),t=n(5879),h=n(4516),u=n(1631),m=n(2096),d=n(6306),v=n(553),C=n(9862),Z=n(2632);let y=(()=>{class r{constructor(e,i){this.http=e,this.loginService=i,this.registerUrl=v.N.baseApiUrl+"auth/register"}registerAndLoginRemote(e){var i={email:"",token:"",baseCurrencyCode:""};return this.registerRemote(e).pipe((0,u.z)(o=>o.success?this.loginService.loginRemote({email:e.email,password:e.password}):(0,m.of)({...o,...i})),(0,d.K)(o=>(0,m.of)({errors:o?.error?.errors,success:!1,...i})))}registerRemote(e){return this.http.post(this.registerUrl,e,{headers:{"content-type":"application/json"}}).pipe((0,u.z)(()=>(0,m.of)({errors:[],success:!0})),(0,d.K)(o=>(0,m.of)({errors:o?.error?.errors,success:!1})))}static#t=this.\u0275fac=function(i){return new(i||r)(t.LFG(C.eN),t.LFG(Z.r))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var O=n(1088),x=n(2939),M=n(2296),g=n(8165),T=n(4913),A=n(3680),I=n(2032),P=n(5940);function R(r,a){1&r&&(t.TgZ(0,"div"),t._UZ(1,"mat-spinner"),t.qZA())}function U(r,a){1&r&&(t.TgZ(0,"div"),t._UZ(1,"img",10),t.qZA())}function b(r,a){1&r&&(t.TgZ(0,"mat-error"),t._uU(1,"Email is invalid"),t.qZA())}function L(r,a){1&r&&(t.TgZ(0,"mat-error"),t._uU(1,"Password is required"),t.qZA())}function w(r,a){1&r&&(t.TgZ(0,"mat-error"),t._uU(1,"Password should match"),t.qZA())}function D(r,a){if(1&r&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&r){const e=a.$implicit;t.s9C("value",e.code),t.xp6(1),t.Oqu(e.description)}}function J(r,a){if(1&r){const e=t.EpF();t.TgZ(0,"form",3),t.NdJ("ngSubmit",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onRegister())}),t.YNc(1,U,2,0,"div",4),t.TgZ(2,"mat-form-field")(3,"mat-label"),t._uU(4,"Email"),t.qZA(),t._UZ(5,"input",5),t.YNc(6,b,2,0,"mat-error",4),t.qZA(),t.TgZ(7,"mat-form-field")(8,"mat-label"),t._uU(9,"Password"),t.qZA(),t._UZ(10,"input",6),t.YNc(11,L,2,0,"mat-error",4),t.qZA(),t.TgZ(12,"mat-form-field")(13,"mat-label"),t._uU(14,"Confirm password"),t.qZA(),t._UZ(15,"input",6),t.YNc(16,w,2,0,"mat-error",4),t.qZA(),t.TgZ(17,"mat-form-field")(18,"mat-label"),t._uU(19,"Base currency"),t.qZA(),t.TgZ(20,"mat-select",7),t.YNc(21,D,2,2,"mat-option",8),t.ALo(22,"async"),t.qZA()(),t.TgZ(23,"button",9),t._uU(24,"Register"),t.qZA()()}if(2&r){const e=t.oxw();t.Q6J("formGroup",e.registerForm),t.xp6(1),t.Q6J("ngIf",e.isDesktopHeight.matches),t.xp6(4),t.Q6J("formControl",e.email),t.xp6(1),t.Q6J("ngIf",e.email.invalid),t.xp6(4),t.Q6J("formControl",e.password),t.xp6(1),t.Q6J("ngIf",e.password.invalid),t.xp6(4),t.Q6J("formControl",e.confirm),t.xp6(1),t.Q6J("ngIf",e.confirm.invalid),t.xp6(4),t.Q6J("formControl",e.currency),t.xp6(1),t.Q6J("ngForOf",t.lcZ(22,11,e.currencies$)),t.xp6(2),t.Q6J("disabled",!e.registerForm.valid||e.submitButtonDisabled)}}let N=(()=>{class r{constructor(e,i,o,l,F){this.currenciesService=e,this.registerService=i,this.changeDetectorRef=o,this.media=l,this.snackBar=F,this.submitButtonDisabled=!1}ngOnInit(){this.initialyzeMediaMatcherListener(),this.initialyzeFormComponents(),this.currencies$=this.currenciesService.getCurrencies(),this.isLoading$=this.currenciesService.isLoading()}onRegister(){this.submitButtonDisabled=!0,this.registerService.registerAndLoginRemote({email:this.email.value,password:this.password.value,baseCurrencyCode:this.currency.value}).subscribe(e=>{this.submitButtonDisabled=!1,e.success||e.errors.forEach(i=>{this.snackBar.open(i,"OK")})})}initialyzeMediaMatcherListener(){this.isDesktopHeight=this.media.matchMedia("(min-height: 700px)"),this.isDesktopHeightListener=()=>this.changeDetectorRef.detectChanges(),this.isDesktopHeight.addEventListener("change",this.isDesktopHeightListener)}initialyzeFormComponents(){this.email=new s.NI("",[s.kI.required,s.kI.email]),this.password=new s.NI("",s.kI.required),this.confirm=new s.NI("",s.kI.required),this.currency=new s.NI("",s.kI.required),this.confirm.addValidators(this.createCompareValidator(this.password,this.confirm)),this.registerForm=new s.cw({email:this.email,password:this.password,confirm:this.confirm,currency:this.currency})}createCompareValidator(e,i){return()=>e.value!==i.value?{match_error:"Password should match"}:null}ngOnDestroy(){this.isDesktopHeight.removeEventListener("change",this.isDesktopHeightListener)}static#t=this.\u0275fac=function(i){return new(i||r)(t.Y36(h.t),t.Y36(y),t.Y36(t.sBO),t.Y36(O.vx),t.Y36(x.ux))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-register"]],standalone:!0,features:[t.jDz],decls:5,vars:4,consts:[["id","register-page"],[4,"ngIf","ngIfElse"],["loaded",""],["id","register-form",3,"formGroup","ngSubmit"],[4,"ngIf"],["matInput","","required","","autocomplete","new-email","placeholder","name@domain.com","required","",3,"formControl"],["matInput","","type","password","autocomplete","new-password",3,"formControl"],["required","",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled"],["src","../../../assets/typing.gif","alt","cat"],[3,"value"]],template:function(i,o){if(1&i&&(t.TgZ(0,"div",0),t.YNc(1,R,2,0,"div",1),t.ALo(2,"async"),t.YNc(3,J,25,13,"ng-template",null,2,t.W1O),t.qZA()),2&i){const l=t.MAs(4);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,o.isLoading$))("ngIfElse",l)}},dependencies:[c.ez,c.sg,c.O5,c.Ov,f.q,M.lW,g.KE,g.hX,g.TO,T.gD,A.ey,I.Nt,P.Ou,s.u5,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.UX,s.oH,s.sg],styles:["#register-page[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}#register-page[_ngcontent-%COMP%]   #register-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}#register-page[_ngcontent-%COMP%]   #register-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill, #register-page[_ngcontent-%COMP%]   #register-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:focus{-webkit-transition:background-color 600000s 0s,color 600000s 0s;transition:background-color 600000s 0s,color 600000s 0s}#register-page[_ngcontent-%COMP%]   #register-form[_ngcontent-%COMP%]   input[data-autocompleted][_ngcontent-%COMP%]{background-color:transparent!important}#register-page[_ngcontent-%COMP%]   #register-form[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:210px;margin-bottom:12pt;border-radius:5%}#register-page[_ngcontent-%COMP%]   #register-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:160pt;height:40pt;font-size:11pt}"]})}return r})()}}]);
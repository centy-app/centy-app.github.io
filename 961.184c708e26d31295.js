"use strict";(self.webpackChunkcenty=self.webpackChunkcenty||[]).push([[961],{4961:(S,d,r)=>{r.r(d),r.d(d,{RegisterComponent:()=>c});var p=r(1635),i=r(9417),t=r(4438),v=r(9079),f=r(177),y=r(328),l=r(3487),h=r(3989),M=r(2532),u=r(1397),m=r(7673),C=r(9437),R=r(5312),F=r(1626),D=r(6195);let O=(()=>{class n{constructor(e,s){this.http=e,this.loginService=s,this.registerUrl=R.c.baseApiUrl+"auth/register"}registerAndLoginRemote(e){var s={email:"",token:"",baseCurrencyCode:""};return this.registerRemote(e).pipe((0,u.Z)(a=>a.success?this.loginService.loginRemote({email:e.email,password:e.password}):(0,m.of)({...a,...s})),(0,C.W)(a=>(0,m.of)({errors:a?.error?.errors,success:!1,...s})))}registerRemote(e){return this.http.post(this.registerUrl,e,{headers:{"content-type":"application/json"}}).pipe((0,u.Z)(()=>(0,m.of)({errors:[],success:!0})),(0,C.W)(a=>(0,m.of)({errors:a?.error?.errors,success:!1})))}static#t=this.\u0275fac=function(s){return new(s||n)(t.KVO(F.Qq),t.KVO(D.H))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var E=r(9327),P=r(5416),x=r(8834),g=r(1362),j=r(7250),b=r(6600),$=r(9631),k=r(9183);const T=(n,o)=>o.code;function L(n,o){1&n&&t.nrm(0,"mat-spinner")}function G(n,o){1&n&&t.nrm(0,"img",2)}function w(n,o){1&n&&(t.j41(0,"mat-error"),t.EFF(1,"Email is invalid"),t.k0s())}function X(n,o){1&n&&(t.j41(0,"mat-error"),t.EFF(1,"Password is required"),t.k0s())}function B(n,o){1&n&&(t.j41(0,"mat-error"),t.EFF(1,"Password should match"),t.k0s())}function U(n,o){if(1&n&&(t.j41(0,"mat-option",6),t.EFF(1),t.k0s()),2&n){const e=o.$implicit;t.FS9("value",e.code),t.R7$(),t.JRh(e.description)}}function H(n,o){if(1&n){const e=t.RV6();t.j41(0,"form",1),t.bIt("ngSubmit",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.onRegister())}),t.DNE(1,G,1,0,"img",2),t.j41(2,"mat-form-field")(3,"mat-label"),t.EFF(4,"Email"),t.k0s(),t.nrm(5,"input",3),t.DNE(6,w,2,0,"mat-error"),t.k0s(),t.j41(7,"mat-form-field")(8,"mat-label"),t.EFF(9,"Password"),t.k0s(),t.nrm(10,"input",4),t.DNE(11,X,2,0,"mat-error"),t.k0s(),t.j41(12,"mat-form-field")(13,"mat-label"),t.EFF(14,"Confirm password"),t.k0s(),t.nrm(15,"input",4),t.DNE(16,B,2,0,"mat-error"),t.k0s(),t.j41(17,"mat-form-field")(18,"mat-label"),t.EFF(19,"Base currency"),t.k0s(),t.j41(20,"mat-select",5),t.Z7z(21,U,2,2,"mat-option",6,T),t.nI1(23,"async"),t.k0s()(),t.j41(24,"button",7),t.EFF(25,"Register"),t.k0s()()}if(2&n){const e=t.XpG();t.Y8G("formGroup",e.registerForm),t.R7$(),t.vxM(1,e.isDesktopHeight.matches?1:-1),t.R7$(4),t.Y8G("formControl",e.email),t.R7$(),t.vxM(6,e.email.invalid?6:-1),t.R7$(4),t.Y8G("formControl",e.password),t.R7$(),t.vxM(11,e.password.invalid?11:-1),t.R7$(4),t.Y8G("formControl",e.confirm),t.R7$(),t.vxM(16,e.confirm.invalid?16:-1),t.R7$(4),t.Y8G("formControl",e.currency),t.R7$(),t.Dyx(t.bMT(23,10,e.currencies$)),t.R7$(3),t.Y8G("disabled",!e.registerForm.valid||e.submitButtonDisabled)}}class c{constructor(o,e,s,a,N){this.registerService=o,this.changeDetectorRef=e,this.media=s,this.snackBar=a,this.store=N,this.submitButtonDisabled=!1,this.destroyRef=(0,t.WQX)(t.abz)}ngOnInit(){this.initialyzeMediaMatcherListener(),this.initialyzeFormComponents(),this.store.dispatch(new M.au)}onRegister(){this.submitButtonDisabled=!0,this.registerService.registerAndLoginRemote({email:this.email.value,password:this.password.value,baseCurrencyCode:this.currency.value}).pipe((0,v.pQ)(this.destroyRef)).subscribe(o=>{this.submitButtonDisabled=!1,o.success||o.errors.forEach(e=>{this.snackBar.open(e,"OK")})})}initialyzeMediaMatcherListener(){this.isDesktopHeight=this.media.matchMedia("(min-height: 700px)"),this.isDesktopHeightListener=()=>this.changeDetectorRef.detectChanges(),this.isDesktopHeight.addEventListener("change",this.isDesktopHeightListener)}initialyzeFormComponents(){this.email=new i.MJ("",[i.k0.required,i.k0.email]),this.password=new i.MJ("",i.k0.required),this.confirm=new i.MJ("",i.k0.required),this.currency=new i.MJ("",i.k0.required),this.confirm.addValidators(this.createCompareValidator(this.password,this.confirm)),this.registerForm=new i.gE({email:this.email,password:this.password,confirm:this.confirm,currency:this.currency})}createCompareValidator(o,e){return()=>o.value!==e.value?{match_error:"Password should match"}:null}ngOnDestroy(){this.isDesktopHeight.removeEventListener("change",this.isDesktopHeightListener)}static#t=this.\u0275fac=function(e){return new(e||c)(t.rXU(O),t.rXU(t.gRc),t.rXU(E.DY),t.rXU(P.UG),t.rXU(l.il))};static#e=this.\u0275cmp=t.VBU({type:c,selectors:[["app-register"]],standalone:!0,features:[t.aNF],decls:4,vars:3,consts:[["id","register-page"],["id","register-form",3,"ngSubmit","formGroup"],["src","../../../assets/typing.gif","alt","cat"],["matInput","","required","","autocomplete","new-email","placeholder","name@domain.com","required","",3,"formControl"],["matInput","","type","password","autocomplete","new-password",3,"formControl"],["required","",3,"formControl"],[3,"value"],["mat-raised-button","","color","primary",3,"disabled"]],template:function(e,s){1&e&&(t.j41(0,"div",0),t.DNE(1,L,1,0,"mat-spinner"),t.nI1(2,"async"),t.DNE(3,H,26,12),t.k0s()),2&e&&(t.R7$(),t.vxM(1,t.bMT(2,1,s.isLoading$)?1:3))},dependencies:[f.MD,f.Jj,y.G,x.$z,g.rl,g.nJ,g.TL,j.VO,b.wT,$.fg,k.LG,i.YN,i.qT,i.me,i.BC,i.cb,i.YS,i.X1,i.l_,i.j4],styles:["#register-page[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}#register-page[_ngcontent-%COMP%]   #register-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}#register-page[_ngcontent-%COMP%]   #register-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill, #register-page[_ngcontent-%COMP%]   #register-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:focus{-webkit-transition:background-color 600000s 0s,color 600000s 0s;transition:background-color 600000s 0s,color 600000s 0s}#register-page[_ngcontent-%COMP%]   #register-form[_ngcontent-%COMP%]   input[data-autocompleted][_ngcontent-%COMP%]{background-color:transparent!important}#register-page[_ngcontent-%COMP%]   #register-form[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:210px;margin-bottom:12pt;border-radius:5%}#register-page[_ngcontent-%COMP%]   #register-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:160pt;height:40pt;font-size:11pt}"]})}(0,p.Cg)([(0,l.l6)(h.X.getCurrencies)],c.prototype,"currencies$",void 0),(0,p.Cg)([(0,l.l6)(h.X.getIsLoading)],c.prototype,"isLoading$",void 0)}}]);
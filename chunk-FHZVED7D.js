import{a as S,b as L,c as V,d as Q}from"./chunk-FDP5HH37.js";import{a as k,e as x}from"./chunk-O5LUZGNK.js";import{d as K}from"./chunk-QYH3FJIN.js";import{$b as B,Ab as I,Dc as H,Ka as T,Kc as J,La as v,Ma as g,Na as y,Ra as o,Sa as s,Ua as w,Ub as R,Va as u,Vb as A,Wa as C,Wb as j,Xa as m,Xb as M,Yb as W,Zb as F,_b as G,aa as h,ac as U,bb as l,bc as q,cc as N,db as D,ea as O,eb as f,fb as P,la as p,ma as _,ra as $,wc as z,ya as a,za as b}from"./chunk-TO2CRQFP.js";function X(r,c){if(r&1){let t=u();o(0,"mat-tree-node",5),l(1),o(2,"button",6),C("click",function(){let i=p(t).$implicit,e=m();return _(e.onCreateSubCategory(i))}),o(3,"mat-icon"),l(4,"add"),s()(),o(5,"button",6),C("click",function(){let i=p(t).$implicit,e=m();return _(e.openDeleteConfirmationDialog(i))}),o(6,"mat-icon"),l(7,"delete"),s()()()}if(r&2){let t=c.$implicit;a(),f(" ",t.name," ",t.currencyCode," ")}}function Y(r,c){if(r&1){let t=u();o(0,"mat-nested-tree-node")(1,"div",7)(2,"button",8)(3,"mat-icon",9),l(4),s()(),l(5),o(6,"button",6),C("click",function(){let i=p(t).$implicit,e=m();return _(e.onCreateSubCategory(i))}),o(7,"mat-icon"),l(8,"add"),s()(),o(9,"button",6),C("click",function(){let i=p(t).$implicit,e=m();return _(e.openDeleteConfirmationDialog(i))}),o(10,"mat-icon"),l(11,"delete"),s()()(),o(12,"div",10),w(13,11),s()()}if(r&2){let t=c.$implicit,n=m();a(2),v("aria-label","Toggle "+t.name),a(2),D(" ",n.spendingTreeControl.isExpanded(t)?"expand_more":"chevron_right"," "),a(),f(" ",t.name," ",t.currencyCode," "),a(7),y("example-tree-invisible",!n.spendingTreeControl.isExpanded(t))}}function Z(r,c){if(r&1){let t=u();o(0,"mat-tree-node",5),l(1),o(2,"button",6),C("click",function(){let i=p(t).$implicit,e=m();return _(e.onCreateSubCategory(i))}),o(3,"mat-icon"),l(4,"add"),s()(),o(5,"button",6),C("click",function(){let i=p(t).$implicit,e=m();return _(e.openDeleteConfirmationDialog(i))}),o(6,"mat-icon"),l(7,"delete"),s()()()}if(r&2){let t=c.$implicit;a(),f(" ",t.name," ",t.currencyCode," ")}}function ee(r,c){if(r&1){let t=u();o(0,"mat-nested-tree-node")(1,"div",7)(2,"button",8)(3,"mat-icon",9),l(4),s()(),l(5),o(6,"button",6),C("click",function(){let i=p(t).$implicit,e=m();return _(e.onCreateSubCategory(i))}),o(7,"mat-icon"),l(8,"add"),s()(),o(9,"button",6),C("click",function(){let i=p(t).$implicit,e=m();return _(e.openDeleteConfirmationDialog(i))}),o(10,"mat-icon"),l(11,"delete"),s()()(),o(12,"div",10),w(13,11),s()()}if(r&2){let t=c.$implicit,n=m();a(2),v("aria-label","Toggle "+t.name),a(2),D(" ",n.assetsTreeControl.isExpanded(t)?"expand_more":"chevron_right"," "),a(),f(" ",t.name," ",t.currencyCode," "),a(7),y("example-tree-invisible",!n.assetsTreeControl.isExpanded(t))}}var Se=(()=>{let c=class c{constructor(n,i,e){this.store=n,this.categoriesService=i,this.dialog=e,this.spendingTreeControl=new M(d=>d.children),this.spendingDataSource=new N,this.assetsTreeControl=new M(d=>d.children),this.assetsDataSource=new N,this.spendingCategories$=h(x).select(V.getSpendingCategories),this.assetsCategories$=h(x).select(V.getAssetsCategories),this.destroyRef=h($),this.hasChild=(d,E)=>!!E.children&&E.children.length>0,this.spendingCategories$.pipe(k(this.destroyRef)).subscribe(d=>{this.spendingDataSource.data=d,this.expandAllNodes(this.spendingTreeControl,d)}),this.assetsCategories$.pipe(k(this.destroyRef)).subscribe(d=>{this.assetsDataSource.data=d,this.expandAllNodes(this.assetsTreeControl,d)})}ngOnInit(){this.store.dispatch(new S)}onCreateSubCategory(n){let i={parentId:n.id,type:n.type,name:"New Subcategory",currencyCode:n.currencyCode,iconId:"00000000-0000-0000-0000-000000000000"};this.categoriesService.createCategory(i).subscribe(()=>{this.store.dispatch(new S)})}onDeleteCategory(n){this.categoriesService.deleteCategory(n.id).subscribe(()=>{this.store.dispatch(new S)})}openDeleteConfirmationDialog(n){this.dialog.open(Q,{width:"250px",data:{name:n.name}}).afterClosed().subscribe(e=>{e&&this.onDeleteCategory(n)})}expandAllNodes(n,i){i.forEach(e=>{n.expand(e),e.children&&this.expandAllNodes(n,e.children)})}};c.\u0275fac=function(i){return new(i||c)(b(x),b(L),b(z))},c.\u0275cmp=O({type:c,selectors:[["app-categories"]],standalone:!0,features:[P],decls:9,vars:6,consts:[["label","Spending"],[1,"example-tree",3,"dataSource","treeControl"],["matTreeNodeToggle","",4,"matTreeNodeDef"],[4,"matTreeNodeDef","matTreeNodeDefWhen"],["label","Assets"],["matTreeNodeToggle",""],["mat-icon-button","",3,"click"],[1,"mat-tree-node"],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],["role","group"],["matTreeNodeOutlet",""]],template:function(i,e){i&1&&(o(0,"mat-tab-group")(1,"mat-tab",0)(2,"mat-tree",1),T(3,X,8,2,"mat-tree-node",2)(4,Y,14,6,"mat-nested-tree-node",3),s()(),o(5,"mat-tab",4)(6,"mat-tree",1),T(7,Z,8,2,"mat-tree-node",2)(8,ee,14,6,"mat-nested-tree-node",3),s()()()),i&2&&(a(2),g("dataSource",e.spendingDataSource)("treeControl",e.spendingTreeControl),a(2),g("matTreeNodeDefWhen",e.hasChild),a(2),g("dataSource",e.assetsDataSource)("treeControl",e.assetsTreeControl),a(2),g("matTreeNodeDefWhen",e.hasChild))},dependencies:[I,J,R,A,j,G,F,q,U,W,B,H,K],styles:[".mat-tree[_ngcontent-%COMP%]{background-color:var(--mat-sidenav-content-background-color)}.example-tree-invisible[_ngcontent-%COMP%]{display:none}.example-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .example-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;list-style-type:none}.example-tree[_ngcontent-%COMP%]   .mat-nested-tree-node[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%]{padding-left:40px}.example-tree[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%] > .mat-tree-node[_ngcontent-%COMP%]{padding-left:40px}[_nghost-%COMP%]     .mat-mdc-tab-body-content{overflow:hidden!important}"]});let r=c;return r})();export{Se as CategoriesComponent};

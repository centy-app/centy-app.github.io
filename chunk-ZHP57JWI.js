import{$ as u,A as nt,B as M,C as rt,Da as O,E as ot,F as it,Ga as ut,H as wt,I as Nt,N as At,P as T,Q as jt,S as b,T as Rt,U as Ft,W as f,X as B,Z as h,a as l,aa as d,b as Tt,da as Ct,f as Q,fa as $,fb as lt,h as A,hb as kt,ja as st,k as j,l as bt,m as R,mb as L,n as Dt,na as at,p as tt,pa as ct,q as I,qa as Pt,r as V,ra as X,s as et,u as F,va as xt,w as U,wb as Gt}from"./chunk-4DWN4KFE.js";function de(e){e||(st(de),e=d(X));let t=new A(o=>e.onDestroy(o.next.bind(o)));return o=>o.pipe(b(t))}function dt(e,t){let o=!t?.manualCleanup;o&&!t?.injector&&st(dt);let n=o?t?.injector?.get(X)??d(X):null,r=fe(t?.equal),i;t?.requireSync?i=ut({kind:0},{equal:r}):i=ut({kind:1,value:t?.initialValue},{equal:r});let s=e.subscribe({next:a=>i.set({kind:1,value:a}),error:a=>{if(t?.rejectErrors)throw a;i.set({kind:2,error:a})}});return n?.onDestroy(s.unsubscribe.bind(s)),L(()=>{let a=i();switch(a.kind){case 1:return a.value;case 2:throw a.error;case 0:throw new Ft(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}},{equal:t?.equal})}function fe(e=Object.is){return(t,o)=>t.kind===1&&o.kind===1&&e(t.value,o.value)}var m="NGXS_META",ht="NGXS_OPTIONS_META",ft="NGXS_SELECTOR_META";function gt(e){if(!e.hasOwnProperty(m)){let t={name:null,actions:{},defaults:{},path:null,makeRootSelector(o){return o.getStateGetter(t.name)},children:[]};Object.defineProperty(e,m,{value:t})}return D(e)}function D(e){return e[m]}function Vt(e){return e.hasOwnProperty(ft)||Object.defineProperty(e,ft,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),St(e)}function St(e){return e[ft]}function he(e,t){return e===t}function ge(e,t,o){if(t===null||o===null||t.length!==o.length)return!1;let n=t.length;for(let r=0;r<n;r++)if(!e(t[r],o[r]))return!1;return!0}function Y(e,t=he){let o=null,n=null;function r(){return ge(t,o,arguments)||(n=e.apply(null,arguments)),o=arguments,n}return r.reset=function(){o=null,n=null},r}var Se=!1,ye=(()=>{let t=class t{static set(n){this._value=n}static pop(){let n=this._value;return this._value={},n}};t._value={};let e=t;return e})(),yt=new h(Se?"INITIAL_STATE_TOKEN":"",{providedIn:"root",factory:()=>ye.pop()}),H=(()=>{let t=class t extends R{constructor(){super(1)}bootstrap(){this.next(!0),this.complete()}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Ut=!1,Bt=new h(Ut?"\u0275NGXS_STATE_FACTORY":""),$t=new h(Ut?"\u0275NGXS_STATE_CONTEXT_FACTORY":"");function Xt(e){let t=[],o=!1;return function(...r){if(o){t.unshift(r);return}for(o=!0,e(...r);t.length>0;){let i=t.pop();i&&e(...i)}o=!1}}var Z=class extends j{constructor(){super(...arguments),this._orderedNext=Xt(t=>super.next(t))}next(t){this._orderedNext(t)}},pt=class extends bt{constructor(t){super(t),this._orderedNext=Xt(o=>super.next(o)),this._currentValue=t}getValue(){return this._currentValue}next(t){this._currentValue=t,this._orderedNext(t)}},z=(()=>{let t=class t extends pt{constructor(){super({}),this.state=dt(this,{manualCleanup:!0,requireSync:!0})}ngOnDestroy(){this.complete()}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var C=(()=>{let t=class t{};t.type="@@INIT";let e=t;return e})(),P=(()=>{let t=class t{constructor(n){this.addedStates=n}};t.type="@@UPDATE_STATE";let e=t;return e})(),me=!1,vt=new h(me?"NGXS_PLUGINS":"");function w(e){return e.constructor?.type||e.type}var q=(e,t,o)=>{e=l({},e);let n=t.split("."),r=n.length-1;return n.reduce((i,s,a)=>(a===r?i[s]=o:i[s]=Array.isArray(i[s])?i[s].slice():l({},i[s]),i&&i[s]),e),e},x=(e,t)=>t.split(".").reduce((o,n)=>o&&o[n],e);function Lt(e){return typeof e=="function"}var Ee=(()=>{let t=class t{enter(n){return n()}leave(n){return n()}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Oe(e,t,o){throw new Error(`State name '${e}' from ${t} already exists in ${o}.`)}function _e(e){throw new Error(`States must be decorated with @State() decorator, but "${e}" isn't.`)}function Ie(e){return`'${e}' class should be decorated with @Injectable() right after the @State() decorator`}function Me(e){let t="You have an invalid state initialization order. This typically occurs when `NgxsModule.forFeature`\nor `provideStates` is called before `NgxsModule.forRoot` or `provideStore`.\nOne example is when `NgxsRouterPluginModule.forRoot` is called before `NgxsModule.forRoot`.";if(e){let o=Object.keys(e).map(n=>`"${n}"`);t+=`
Feature states added before the store initialization is complete: ${o.join(", ")}.`}return t}var qt=(()=>{let t=class t{constructor(n,r){this._ngZone=n,this._platformId=r}enter(n){return Gt(this._platformId)?this.runInsideAngular(n):this.runOutsideAngular(n)}leave(n){return this.runInsideAngular(n)}runInsideAngular(n){return O.isInAngularZone()?n():this._ngZone.run(n)}runOutsideAngular(n){return O.isInAngularZone()?this._ngZone.runOutsideAngular(n):n()}};t.\u0275fac=function(r){return new(r||t)(u(O),u(xt))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Kt=!1,Wt=new h(Kt?"CUSTOM_NGXS_EXECUTION_STRATEGY":""),Te=new h(Kt?"NGXS_EXECUTION_STRATEGY":"",{providedIn:"root",factory:()=>{let e=d(O),t=d(Ct),o=t.get(Wt),n=e instanceof O;return o?t.get(o):t.get(n?qt:Ee)}}),Jt=(()=>{let t=class t{constructor(n){this._executionStrategy=n}enter(n){return this._executionStrategy.enter(n)}leave(n){return this._executionStrategy.leave(n)}};t.\u0275fac=function(r){return new(r||t)(u(Te))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Qt=e=>(...t)=>e.shift()(...t,(...n)=>Qt(e)(...n));function W(e){return t=>new A(o=>t.subscribe({next(n){e.leave(()=>o.next(n))},error(n){e.leave(()=>o.error(n))},complete(){e.leave(()=>o.complete())}}))}var te=(()=>{let t=class t extends Z{ngOnDestroy(){this.complete()}};t.\u0275fac=(()=>{let n;return function(i){return(n||(n=at(t)))(i||t)}})(),t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Et=(()=>{let t=class t{constructor(n,r){this._parentManager=n,this._pluginHandlers=r,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){let n=this.getPluginHandlers();this.rootPlugins.push(...n)}getPluginHandlers(){return(this._pluginHandlers||[]).map(r=>r.handle?r.handle.bind(r):r)}};t.\u0275fac=function(r){return new(r||t)(u(t,12),u(vt,8))},t.\u0275prov=f({token:t,factory:t.\u0275fac});let e=t;return e})(),Ot=new WeakMap,Zt=Q.onUnhandledError;Q.onUnhandledError=function(e){let t=Ot.get(e);if(t)t();else if(Zt)Zt.call(this,e);else throw e};function be(e){let t=Ot.get(e);return t?(t(),!0):!1}function De(e,t){if(e!==null&&typeof e=="object"){let o=!1;Ot.set(e,()=>{o||(o=!0,t())})}return e}function we(e){return t=>{let o=t.subscribe({error:n=>{e.runOutsideAngular(()=>{queueMicrotask(()=>{o&&be(n)})})}});return new A(n=>(o?.unsubscribe(),o=null,t.subscribe(n)))}}var ee=(()=>{let t=class t extends j{};t.\u0275fac=(()=>{let n;return function(i){return(n||(n=at(t)))(i||t)}})(),t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Ne=(()=>{let t=class t{constructor(n,r,i,s,a,c){this._ngZone=n,this._actions=r,this._actionResults=i,this._pluginManager=s,this._stateStream=a,this._ngxsExecutionStrategy=c}dispatch(n){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(n)).pipe(we(this._ngZone),W(this._ngxsExecutionStrategy))}dispatchByEvents(n){return Array.isArray(n)?n.length===0?I(void 0):nt(n.map(r=>this.dispatchSingle(r))).pipe(F(()=>{})):this.dispatchSingle(n)}dispatchSingle(n){let r=this._stateStream.getValue(),i=this._pluginManager.plugins;return Qt([...i,(s,a)=>{s!==r&&this._stateStream.next(s);let c=this.getActionResultStream(a);return c.subscribe(S=>this._actions.next(S)),this._actions.next({action:a,status:"DISPATCHED"}),this.createDispatchObservable(c)}])(r,n).pipe(T())}getActionResultStream(n){return this._actionResults.pipe(M(r=>r.action===n&&r.status!=="DISPATCHED"),it(1),T())}createDispatchObservable(n){return n.pipe(Nt(r=>{switch(r.status){case"SUCCESSFUL":return I(this._stateStream.getValue());case"ERRORED":return V(()=>r.error);default:return Dt}})).pipe(T())}};t.\u0275fac=function(r){return new(r||t)(u(O),u(te),u(ee),u(Et),u(z),u(Jt))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),_t=!1,ne=new h(_t?"ROOT_STATE_TOKEN":""),re=new h(_t?"FEATURE_STATE_TOKEN":""),oe=new h(_t?"NGXS_OPTIONS":""),k=(()=>{let t=class t{constructor(){this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=qt,this.selectorOptions={injectContainerState:!1,suppressErrors:!1}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=f({token:t,factory:()=>(()=>{let n=new t,r=d(oe);return Tt(l(l({},n),r),{selectorOptions:l(l({},n.selectorOptions),r.selectorOptions)})})(),providedIn:"root"});let e=t;return e})(),mt=class{constructor(t,o,n){this.previousValue=t,this.currentValue=o,this.firstChange=n}};var G=(()=>{let t=class t{constructor(n,r,i){this._stateStream=n,this._dispatcher=r,this._config=i}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:r=>this._stateStream.next(r),dispatch:r=>this._dispatcher.dispatch(r)}}setStateToTheCurrentWithNew(n){let r=this.getRootStateOperations(),i=r.getState();r.setState(l(l({},i),n.defaults))}};t.\u0275fac=function(r){return new(r||t)(u(z),u(Ne),u(k))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Ae=!1;function je(e,t,o){return n=>{let{argumentSelectorFunctions:r,selectorOptions:i}=Fe(n,e,t),{suppressErrors:s}=i;return function(c){let S=r.map(g=>g(c));try{return o(...S)}catch(g){if(s&&g instanceof TypeError)return;throw Ae&&console.error("The selector below has thrown an error upon invocation. Please check for any unsafe property access that may result in null or undefined values.",e.originalFn),g}}}}function Re(e,t){let o=t&&t.containerClass,r=Y(function(...s){let a=e.apply(o,s);return a instanceof Function?Y.apply(null,[a]):a});return Object.setPrototypeOf(r,e),r}function Fe(e,t,o=[]){let n=t.getSelectorOptions(),r=e.getSelectorOptions(n),s=Ce(o,r,t.containerClass).map(a=>ie(a)(e));return{selectorOptions:r,argumentSelectorFunctions:s}}function Ce(e=[],t,o){let n=[],r=t.injectContainerState||e.length===0;return o&&r&&D(o)&&n.push(o),n.push(...e),n}function ie(e){let t=St(e)||D(e);return t&&t.makeRootSelector||(()=>e)}var It=!1;function Pe(e){return t=>{for(let o=0;o<e.length;o++){if(!t)return;t=t[e[o]]}return t}}function xe(e){let t=e,o="store."+t[0],n=0,r=t.length,i=o;for(;++n<r;)i=i+" && "+(o=o+"."+t[n]);return new Function("store","return "+i+";")}var ke=new h(It?"PROP_GETTER":"",{providedIn:"root",factory:()=>d(k).compatibility?.strictContentSecurityPolicy?Pe:xe});function Ge(e){let t=o=>{let n=e.find(r=>r===o);if(It&&!n)throw new Error(`Child state not found: ${o}. \r
You may have forgotten to add states to module`);return n[m].name};return e.reduce((o,n)=>{let{name:r,children:i}=n[m];return o[r]=(i||[]).map(t),o},{})}function Ve(e){return e.reduce((t,o)=>{let n=o[m];return t[n.name]=o,t},{})}function Ue(e,t={}){let o=(n,r)=>{for(let i in n)if(n.hasOwnProperty(i)&&n[i].indexOf(r)>=0){let s=o(n,i);return s!==null?`${s}.${i}`:i}return null};for(let n in e)if(e.hasOwnProperty(n)){let r=o(e,n);t[n]=r?`${r}.${n}`:n}return t}function Be(e){let t=[],o={},n=(r,i=[])=>{Array.isArray(i)||(i=[]),i.push(r),o[r]=!0,e[r].forEach(s=>{if(It&&i.indexOf(s)>=0)throw new Error(`Circular dependency '${s}' is required by '${r}': ${i.join(" -> ")}`);o[s]||n(s,i.slice(0))}),t.indexOf(r)<0&&t.push(r)};return Object.keys(e).forEach(r=>n(r)),t.reverse()}function $e(...e){return Xe(e,["DISPATCHED"])}function Xe(e,t,o=Ze){let n=Ye(e),r=t&&He(t);return function(i){return i.pipe(Le(n,r),o())}}function Le(e,t){return M(o=>{let n=w(o.action),r=e[n],i=t?t[o.status]:!0;return r&&i})}function Ze(){return F(e=>e.action)}function Ye(e){return e.reduce((t,o)=>(t[w(o)]=!0,t),{})}function He(e){return e.reduce((t,o)=>(t[o]=!0,t),{})}function ze(e){return t=>{let o=l({},t);for(let n in e)o[n]=e[n];return o}}var Mt=(()=>{let t=class t{constructor(n){this._internalStateOperations=n}createStateContext(n){let r=this._internalStateOperations.getRootStateOperations();return{getState(){let i=r.getState();return ae(i,n.path)},patchState(i){let s=r.getState(),a=ze(i);Yt(r,s,a,n.path)},setState(i){let s=r.getState();Lt(i)?Yt(r,s,i,n.path):se(r,s,i,n.path)},dispatch(i){return r.dispatch(i)}}}};t.\u0275fac=function(r){return new(r||t)(u(G))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function se(e,t,o,n){let r=q(t,n,o);return e.setState(r),r}function Yt(e,t,o,n){let r=ae(t,n),i=o(r);return se(e,t,i,n)}function ae(e,t){return x(e,t)}var tr=new RegExp("^[a-zA-Z0-9_]+$");function qe(e,t,o){let n=o[e];n&&n!==t&&Oe(e,t.name,n.name)}function Ke(e){e.forEach(t=>{D(t)||_e(t.name)})}function We(e){Qe(e)||Je(e)||console.warn(Ie(e.name))}function Je(e){return!!e.\u0275prov}function Qe(e){return(e.__annotations__||[]).some(o=>o?.ngMetadataName==="Injectable")}var tn=!1,en=new h(tn?"NGXS_DEVELOPMENT_OPTIONS":"",{providedIn:"root",factory:()=>({warnOnUnhandledActions:!0})}),nn=(()=>{let t=class t{constructor(n){this._ignoredActions=new Set([C.type,P.type]),typeof n.warnOnUnhandledActions=="object"&&this.ignoreActions(...n.warnOnUnhandledActions.ignore)}ignoreActions(...n){for(let r of n)this._ignoredActions.add(r.type)}warn(n){Array.from(this._ignoredActions).some(i=>i===w(n))||(n=n.constructor&&n.constructor.name!=="Object"?n.constructor.name:n.type,console.warn(`The ${n} action has been dispatched but hasn't been handled. This may happen if the state with an action handler for this action is not registered.`))}};t.\u0275fac=function(r){return new(r||t)(u(en))},t.\u0275prov=f({token:t,factory:t.\u0275fac});let e=t;return e})(),rn=(()=>{let t=class t{constructor(){this._ngZone=d(O),this._errorHandler=d(Pt)}handleError(n,r){this._ngZone.runOutsideAngular(()=>this._errorHandler.handleError(n))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),K=!1;function on(e){let t=e===void 0?{}:e;return e&&(Array.isArray(e)?t=e.slice():typeof e=="object"&&(t=l({},e))),t}var N=(()=>{let t=class t{constructor(n,r,i,s,a,c,S){this._injector=n,this._config=r,this._parentFactory=i,this._actions=s,this._actionResults=a,this._stateContextFactory=c,this._initialState=S,this._actionsSubscription=null,this._propGetter=d(ke),this._ngxsUnhandledErrorHandler=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=Y(()=>{let g=this,_=g._propGetter;function p(E){let y=g.statePaths[E];return y?_(y.split(".")):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(E){let y=p(E);return y||((...le)=>(y||(y=p(E)),y?y(...le):void 0))},getSelectorOptions(E){let y=g._config.selectorOptions;return l(l({},y),E||{})}}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}ngOnDestroy(){this._actionsSubscription?.unsubscribe()}add(n){K&&Ke(n);let{newStates:r}=this.addToStatesMap(n);if(!r.length)return[];let i=Ge(r),s=Be(i),a=Ue(i),c=Ve(r),S=[];for(let g of s){let _=c[g],p=a[g],v=_[m];this.addRuntimeInfoToMeta(v,p),K&&We(_);let E={name:g,path:p,isInitialised:!1,actions:v.actions,instance:this._injector.get(_),defaults:on(v.defaults)};this.hasBeenMountedAndBootstrapped(g,p)||S.push(E),this.states.push(E)}return S}addAndReturnDefaults(n){let r=n||[],i=this.add(r);return{defaults:i.reduce((a,c)=>q(a,c.path,c.defaults),{}),states:i}}connectActionHandlers(){if(this._parentFactory||this._actionsSubscription!==null)return;let n=new j;this._actionsSubscription=this._actions.pipe(M(r=>r.status==="DISPATCHED"),U(r=>{n.next(r);let i=r.action;return this.invokeActions(n,i).pipe(F(()=>({action:i,status:"SUCCESSFUL"})),ot({action:i,status:"CANCELED"}),rt(s=>{let a=this._ngxsUnhandledErrorHandler||=this._injector.get(rn),c=De(s,()=>a.handleError(s,{action:i}));return I({action:i,status:"ERRORED",error:c})}))})).subscribe(r=>this._actionResults.next(r))}invokeActions(n,r){let i=w(r),s=[],a=!1;for(let c of this.states){let S=c.actions[i];if(S)for(let g of S){let _=this._stateContextFactory.createStateContext(c);try{let p=c.instance[g.fn](_,r);lt(p)&&(p=tt(p)),et(p)?(p=p.pipe(U(v=>lt(v)?tt(v):et(v)?v:I(v)),ot({})),g.options.cancelUncompleted&&(p=p.pipe(b(n.pipe($e(r)))))):p=I({}).pipe(T()),s.push(p)}catch(p){s.push(V(p))}a=!0}}if(K&&!a){let c=this._injector.get(nn,null);c&&c.warn(r)}return s.length||s.push(I({})),nt(s)}addToStatesMap(n){let r=[],i=this.statesByName;for(let s of n){let a=D(s).name;K&&qe(a,s,i),!i[a]&&(r.push(s),i[a]=s)}return{newStates:r}}addRuntimeInfoToMeta(n,r){this.statePaths[n.name]=r,n.path=r}hasBeenMountedAndBootstrapped(n,r){let i=x(this._initialState,r)!==void 0;return this.statesByName[n]&&i}};t.\u0275fac=function(r){return new(r||t)(u(ct),u(k),u(t,12),u(te),u(ee),u(Mt),u(yt,8))},t.\u0275prov=f({token:t,factory:t.\u0275fac});let e=t;return e})(),J=(()=>{let t=class t{constructor(n,r,i,s,a,c){this._stateStream=n,this._internalStateOperations=r,this._config=i,this._internalExecutionStrategy=s,this._stateFactory=a,this._selectableStateStream=this._stateStream.pipe(W(this._internalExecutionStrategy),T({bufferSize:1,refCount:!0})),this.initStateStream(c)}dispatch(n){return this._internalStateOperations.getRootStateOperations().dispatch(n)}select(n){let r=this.getStoreBoundSelectorFn(n);return this._selectableStateStream.pipe(F(r),rt(i=>this._config.selectorOptions.suppressErrors&&i instanceof TypeError?I(void 0):V(i)),wt(),W(this._internalExecutionStrategy))}selectOnce(n){return this.select(n).pipe(it(1))}selectSnapshot(n){return this.getStoreBoundSelectorFn(n)(this._stateStream.getValue())}selectSignal(n){let r=this.getStoreBoundSelectorFn(n);return L(()=>r(this._stateStream.state()))}subscribe(n){return this._selectableStateStream.pipe(W(this._internalExecutionStrategy)).subscribe(n)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(n){this._internalStateOperations.getRootStateOperations().setState(n)}getStoreBoundSelectorFn(n){let r=ie(n),i=this._stateFactory.getRuntimeSelectorContext();return r(i)}initStateStream(n){let r=this._stateStream.value;(!r||Object.keys(r).length===0)&&this._stateStream.next(n)}};t.\u0275fac=function(r){return new(r||t)(u(z),u(G),u(k),u(Jt),u(N),u(yt,8))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),sn=!1,an=new h(sn?"NGXS_PREBOOT_FNS":"");var cn=(()=>{let t=class t{constructor(n,r){t.store=n,t.config=r}ngOnDestroy(){t.store=null,t.config=null}};t.store=null,t.config=null,t.\u0275fac=function(r){return new(r||t)(u(J),u(k))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),un=!1,ce=(()=>{let t=class t{constructor(n,r,i,s){this._store=n,this._internalStateOperations=r,this._stateContextFactory=i,this._appBootstrappedState=s,this._destroy$=new R(1)}ngOnDestroy(){this._destroy$.next()}ngxsBootstrap(n,r){un&&(n instanceof C?this._initStateHasBeenDispatched=!0:n instanceof P&&!this._initStateHasBeenDispatched&&console.error(Me(n.addedStates))),this._internalStateOperations.getRootStateOperations().dispatch(n).pipe(M(()=>!!r),Rt(()=>this._invokeInitOnStates(r.states)),U(()=>this._appBootstrappedState),M(i=>!!i),b(this._destroy$)).subscribe(()=>this._invokeBootstrapOnStates(r.states))}_invokeInitOnStates(n){for(let r of n){let i=r.instance;i.ngxsOnChanges&&this._store.select(s=>x(s,r.path)).pipe(jt(void 0),At(),b(this._destroy$)).subscribe(([s,a])=>{let c=new mt(s,a,!r.isInitialised);i.ngxsOnChanges(c)}),i.ngxsOnInit&&i.ngxsOnInit(this._getStateContext(r)),r.isInitialised=!0}}_invokeBootstrapOnStates(n){for(let r of n){let i=r.instance;i.ngxsAfterBootstrap&&i.ngxsAfterBootstrap(this._getStateContext(r))}}_getStateContext(n){return this._stateContextFactory.createStateContext(n)}};t.\u0275fac=function(r){return new(r||t)(u(J),u(G),u(Mt),u(H))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),ue=!1;function ln(){(d(an,{optional:!0})||[]).forEach(s=>s());let t=d(N),o=d(G);d(J),d(cn);let n=d(ne,{optional:!0})||[],r=d(ce),i=t.addAndReturnDefaults(n);o.setStateToTheCurrentWithNew(i),t.connectActionHandlers(),r.ngxsBootstrap(new C,i)}function dn(){d(J);let e=d(G),t=d(N),o=d(re,{optional:!0})||[],n=d(ce),r=o.reduce((s,a)=>s.concat(a),[]),i=t.addAndReturnDefaults(r);i.states.length&&(e.setStateToTheCurrentWithNew(i),n.ngxsBootstrap(new P(i.defaults),i))}var er=new h(ue?"NGXS_ROOT_STORE_INITIALIZER":""),nr=new h(ue?"NGXS_FEATURE_STORE_INITIALIZER":"");var fn=(()=>{let t=class t{constructor(){ln()}};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=$({type:t}),t.\u0275inj=B({});let e=t;return e})(),pn=(()=>{let t=class t{constructor(){dn()}};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=$({type:t}),t.\u0275inj=B({});let e=t;return e})();function hn(e,t){return[N,Et,...e,{provide:ne,useValue:e},{provide:kt,useFactory:()=>{let o=d(H);return()=>o.bootstrap()},multi:!0},{provide:oe,useValue:t},{provide:Wt,useValue:t.executionStrategy},{provide:$t,useExisting:Mt},{provide:Bt,useExisting:N}]}function gn(e){return[N,Et,...e,{provide:re,multi:!0,useValue:e}]}var rr=(()=>{let t=class t{static forRoot(n=[],r={}){return{ngModule:fn,providers:hn(n,r)}}static forFeature(n=[]){return{ngModule:pn,providers:gn(n)}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=$({type:t}),t.\u0275inj=B({});let e=t;return e})();function or(e,t){return(o,n,r)=>{let i=gt(o.constructor),s=Array.isArray(e)?e:[e];for(let a of s){let c=a.type;i.actions[c]||(i.actions[c]=[]),i.actions[c].push({fn:n,options:t||{},type:c})}}}function ir(e){return t=>{let o=t,n=gt(o),r=Object.getPrototypeOf(o),i=Sn(r,e);yn({meta:n,inheritedStateClass:r,optionsWithInheritance:i}),o[ht]=i}}function Sn(e,t){let o=e[ht]||{};return l(l({},o),t)}function yn(e){let{meta:t,inheritedStateClass:o,optionsWithInheritance:n}=e,{children:r,defaults:i,name:s}=n,a=typeof s=="string"?s:s&&s.getName()||null;if(o.hasOwnProperty(m)){let c=o[m]||{};t.actions=l(l({},t.actions),c.actions)}t.children=r,t.defaults=i,t.name=a}var Ht="NGXS_SELECTOR_OPTIONS_META",zt={getOptions:e=>e&&e[Ht]||{},defineOptions:(e,t)=>{e&&(e[Ht]=t)}};function vn(e,t){let o=Vt(e);o.originalFn=e;let n=()=>({});t&&(o.containerClass=t.containerClass,o.selectorName=t.selectorName||null,n=t.getSelectorOptions||n);let r=l({},o);return o.getSelectorOptions=()=>mn(r,n()),o}function mn(e,t){return l(l(l(l({},zt.getOptions(e.containerClass)||{}),zt.getOptions(e.originalFn)||{}),e.getSelectorOptions()||{}),t)}function En(e,t,o){let n=Re(t,o),r=vn(t,o);return r.makeRootSelector=je(r,e,n),n}function sr(e){return(t,o,n)=>{n||=Object.getOwnPropertyDescriptor(t,o);let r=n?.value,i=En(e,r,{containerClass:t,selectorName:o.toString(),getSelectorOptions(){return{}}});return{configurable:!0,get(){return i},originalFn:r}}}export{de as a,C as b,vt as c,w as d,J as e,rr as f,or as g,ir as h,sr as i};
